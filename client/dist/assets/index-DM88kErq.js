(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("openFormBtn"),n=document.getElementById("guestFormModal"),i=document.getElementById("closeModal");document.getElementById("audio"),document.getElementById("playPause"),l.addEventListener("click",function(){n.style.display="block"}),i.addEventListener("click",function(){n.style.display="none"}),window.addEventListener("click",function(e){e.target===n&&(n.style.display="none")});const a=document.getElementById("guestForm");a.addEventListener("submit",async function(e){e.preventDefault();const o={photo_url:document.getElementById("photo").value,name:document.getElementById("name").value,message:document.getElementById("message").value,socials:document.getElementById("socials").value};try{const r=await fetch("https://surfshackhostelserver.onrender.com/new-guest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formValues:o})}),s=await r.json();if(!r.ok)throw new Error(s.error||"Failed to add entry");const c=document.querySelector(".guestbkContainer"),d=document.createElement("div");d.className="entry",d.innerHTML=`
        <img src="${o.photo_url}" alt="${o.name}'s photo">
        <p>${o.name}</p>
        <p>${o.message}</p>
        <p>${o.socials}</p>
      `,c.insertBefore(d,c.children[1]),a.reset(),n.style.display="none"}catch(r){console.error(r),alert("Error adding entry")}});async function t(){try{const o=await(await fetch("https://surfshackhostelserver.onrender.com/guests")).json(),r=document.querySelector(".guestbkContainer");o.forEach(s=>{const c=document.createElement("div");c.className="entry",c.innerHTML=`
          <img src="${s.photo_url}" alt="${s.name}'s photo">
          <p>${s.name}</p>
          <p>${s.message}</p>
          <p>${s.socials}</p>
        `,r.appendChild(c)})}catch(e){console.error("Failed to load guestbook entries:",e)}}t()});playPause.addEventListener("click",()=>{audio.paused?(audio.play(),playPause.textContent="⏸"):(audio.pause(),playPause.textContent="▶")});
