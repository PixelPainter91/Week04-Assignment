(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("openFormBtn"),n=document.getElementById("guestFormModal"),a=document.getElementById("closeModal");d.addEventListener("click",function(){n.style.display="block"}),a.addEventListener("click",function(){n.style.display="none"}),window.addEventListener("click",function(e){e.target===n&&(n.style.display="none")});const i=document.getElementById("guestForm");i.addEventListener("submit",async function(e){e.preventDefault();const o={photo_url:document.getElementById("photo").value,name:document.getElementById("name").value,message:document.getElementById("message").value,socials:document.getElementById("socials").value};try{const s=await fetch("https://surfshackhostelserver.onrender.com/new-guest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formValues:o})}),r=await s.json();if(!s.ok)throw new Error(r.error||"Failed to add entry");const c=document.querySelector(".guestbkContainer"),l=document.createElement("div");l.className="entry",l.innerHTML=`
        <img src="${o.photo_url}" alt="${o.name}'s photo">
        <p>${o.name}</p>
        <p>${o.message}</p>
        <p>${o.socials}</p>
      `,c.insertBefore(l,c.children[1]),i.reset(),n.style.display="none"}catch(s){console.error(s),alert("Error adding entry")}});async function t(){try{const o=await(await fetch("https://surfshackhostelserver.onrender.com/guests")).json(),s=document.querySelector(".guestbkContainer");o.forEach(r=>{const c=document.createElement("div");c.className="entry",c.innerHTML=`
          <img src="${r.photo_url}" alt="${r.name}'s photo">
          <p>${r.name}</p>
          <p>${r.message}</p>
          <p>${r.socials}</p>
        `,s.appendChild(c)})}catch(e){console.error("Failed to load guestbook entries:",e)}}t()});
